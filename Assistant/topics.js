// topics.js
const topicData = {
    // トピック検出用のキーワード
    detectKeywords: {
        harupay: ["harupay", "ハルペイ", "はるぺい", "お金", "送金", "チャージ", "残高", "支払い", "pay", "ぺい", "おかね", "かね"],
        quick: ["quick", "クイック", "くいっく", "くぃっく", "買い物", "出品", "購入", "売る", "市場", "マーケット", "ショップ", "しょっぷ", "かいもの"],
        mail: ["メール", "めーる", "メッセージ", "送る", "連絡", "通信", "れんらく", "つうしん"],
        chat: ["チャット", "ちゃっと", "オープン", "みんな", "会話", "全体", "かいわ", "おーぷん"],
        job: ["仕事", "依頼", "募集", "探す", "稼ぐ", "バイト", "しごと", "いらい", "ぼしゅう", "かせぐ"],
        advance: ["advance", "アドバンス", "あどばんす", "商品", "注文", "配送", "買い", "購入", "しょうひん", "ちゅうもん", "はいそう"],
        exchange: ["換金", "売る", "お金に", "換える", "現金", "かんきん", "うる", "かねに"],
        purchaseData: ["購入データ", "買うデータ", "編集", "データ", "でーた", "こうにゅうでーた", "へんしゅう"],
        quickMarket: ["quick相場", "クイック相場", "相場", "情報", "市場", "価格", "そうば", "じょうほう", "かかく"],
        browser: ["ブラウザ", "ぶらうざ", "広告", "ページ", "見る", "閲覧", "こうこく", "ぺーじ", "みる"],
        settings: ["設定", "せってい", "カスタム", "トラブル", "オプション", "調整", "とらぶる", "おぷしょん", "ちょうせい"],
        killCount: ["キル", "きる", "カウント", "ポイント", "倒す", "戦う", "たおす", "たたかう"],
        admin: ["管理者", "op", "harupay管理者", "権限", "管理", "かんり", "けんげん", "おーぴー"],
        weather: ["天気", "雨", "晴れ", "曇り", "てんき", "あめ", "はれ"],
        food: ["食べ物", "ご飯", "お菓子", "たべもの", "ごはん", "おかし", "料理", "りょうり"],
        hobby: ["趣味", "しゅみ", "好きなこと", "遊び", "あそび"],
        time: ["時間", "いま何時", "何時", "じかん", "いまなんじ", "なんじ"],
        haruassistant: ["あなたは", "貴方は", "誰", "だれ", "きみは", "君は"],
        haruaddons: ["haruaddons", "ハルアドオンズ", "制作者", "開発者", "かいはつしゃ", "せいさくしゃ","はるあどおんず"],
        haruphone: ["haruphone", "ハルフォン", "はるふぉん", "スマホ", "スマートフォン"]
    },

    // トピックごとの応答データ
    responses: {
        harupay: {
            intro: "HARUPAYは、お金のやり取りを簡単に行える便利な機能でございます。",
            details: "「HARUPAY」で残高をご確認いただけたり、「送る」で送金が可能です。上限は1億となっております。また、「チャージ」をご利用いただければ、コインでお金を増やすことができます。",
            extra: "オフラインでも送金は可能ですが、残高が不足していると失敗いたしますので、どうぞご注意ください。"
        },
        quick: {
            intro: "Quickは、買い物や取引をお楽しみいただける市場機能でございます。",
            details: "「購入」でアイテムをご購入いただけたり、「出品」でお売りになることも可能です。上限は1億で、「削除」もご利用いただけます。",
            extra: "出品者がオフラインですとご購入いただけませんので、タイミングにご留意ください。"
        },
        mail: {
            intro: "メールは、どなたかとご連絡を取る際に便利な機能でございます。",
            details: "「メール」で相手をお選びいただき、メッセージをお送りいただけます。座標も一緒にお送りできるのが便利ですね。",
            extra: "100文字までとなっており、空のメッセージはお送りできませんので、何かご記入いただく必要がございます。"
        },
        chat: {
            intro: "チャットは、皆さまとお話しするのに最適な機能でございます。",
            details: "「オープンチャット」で全員にメッセージをお送りいただけますし、座標も一緒にお送りすることができます。",
            extra: "皆さまに届きますので、賑やかになること間違いございません。"
        },
        job: {
            intro: "仕事は、稼ぐための依頼機能でございます。",
            details: "「募集」でお仕事を出したり、「探す」でお受けしたりすることができます。「削除」で取り消しも可能でございます。",
            extra: "オフラインですとお受けできませんので、オンラインの際にご利用ください。"
        },
        advance: {
            intro: "Advanceは、商品をご注文いただける便利な機能でございます。",
            details: "検索して商品をお探しいただき、ご注文後、「配送状況」でご確認いただけます。",
            extra: "在庫切れですとご注文いただけませんので、早めにチェックしていただければ幸いです。"
        },
        exchange: {
            intro: "換金は、アイテムをお金に変えられる機能でございます。",
            details: "「換金」で設定されたアイテムをお売りいただければ、お金に換金することができます。",
            extra: "レートは決まっておりますし、設定されたアイテムしか換金できませんので、どうぞご注意ください。"
        },
        purchaseData: {
            intro: "購入データは、取引の記録をご覧いただける機能でございます。",
            details: "管理者は「データ編集」で変更が可能ですが、通常はご覧いただくのみとなります。",
            extra: "過去の取引をご確認したい際に便利でございますね。"
        },
        quickMarket: {
            intro: "Quick相場は、市場の情報を知るための機能でございます。",
            details: "価格の目安をご確認いただけますし、管理者は編集も可能でございます。",
            extra: "取引の参考になりますので、よくご覧いただくことをおすすめいたします。"
        },
        browser: {
            intro: "ブラウザは、情報をご覧いただくのに役立つ機能でございます。",
            details: "広告からページをご覧いただけ、管理者であれば編集も可能でございます。",
            extra: "広告は管理者が設定しておりますので、さまざまなものをご覧いただくと良いかもしれません。"
        },
        settings: {
            intro: "設定は、ゲームを調整できる機能でございます。",
            details: "「トラブルシューティング」で問題を解決したり、「カスタマイズ」でお好みに変更することができます。",
            extra: "OP権限が必要ですので、管理者以外の方はご利用いただけません。"
        },
        killCount: {
            intro: "キルカウントは、戦闘のポイントを数える機能でございます。",
            details: "「設定」でON/OFFが可能で、モブを倒すとポイントが増えます。",
            extra: "管理者が設定を変更できますので、ご確認いただくと安心でございます。"
        },
        admin: {
            intro: "管理者版HARUPAYは、管理者向けの特別な機能でございます。",
            details: "全員に送金が可能で、管理者ならではの便利さがございます。",
            extra: "OP権限が必要ですので、一般の方はご利用いただけません。"
        },harupay: {
            intro: "HARUPAYは、お金のやり取りを簡単に行える便利な機能でございます。",
            details: "「HARUPAY」で残高をご確認いただけたり、「送る」で送金が可能です。上限は1億となっております。また、「チャージ」をご利用いただければ、コインでお金を増やすことができます。",
            extra: "オフラインでも送金は可能ですが、残高が不足していると失敗いたしますので、どうぞご注意ください。"
        },
        quick: {
            intro: "Quickは、買い物や取引をお楽しみいただける市場機能でございます。",
            details: "「購入」でアイテムをご購入いただけたり、「出品」でお売りになることも可能です。上限は1億で、「削除」もご利用いただけます。",
            extra: "出品者がオフラインですとご購入いただけませんので、タイミングにご留意ください。"
        },
        mail: {
            intro: "メールは、どなたかとご連絡を取る際に便利な機能でございます。",
            details: "「メール」で相手をお選びいただき、メッセージをお送りいただけます。座標も一緒にお送りできるのが便利ですね。",
            extra: "100文字までとなっており、空のメッセージはお送りできませんので、何かご記入いただく必要がございます。"
        },
        chat: {
            intro: "チャットは、皆さまとお話しするのに最適な機能でございます。",
            details: "「オープンチャット」で全員にメッセージをお送りいただけますし、座標も一緒にお送りすることができます。",
            extra: "皆さまに届きますので、賑やかになること間違いございません。"
        },
        job: {
            intro: "仕事は、稼ぐための依頼機能でございます。",
            details: "「募集」でお仕事を出したり、「探す」でお受けしたりすることができます。「削除」で取り消しも可能でございます。",
            extra: "オフラインですとお受けできませんので、オンラインの際にご利用ください。"
        },
        advance: {
            intro: "Advanceは、商品をご注文いただける便利な機能でございます。",
            details: "検索して商品をお探しいただき、ご注文後、「配送状況」でご確認いただけます。",
            extra: "在庫切れですとご注文いただけませんので、早めにチェックしていただければ幸いです。"
        },
        exchange: {
            intro: "換金は、アイテムをお金に変えられる機能でございます。",
            details: "「換金」で設定されたアイテムをお売りいただければ、お金に換金することができます。",
            extra: "レートは決まっておりますし、設定されたアイテムしか換金できませんので、どうぞご注意ください。"
        },
        purchaseData: {
            intro: "購入データは、取引の記録をご覧いただける機能でございます。",
            details: "管理者は「データ編集」で変更が可能ですが、通常はご覧いただくのみとなります。",
            extra: "過去の取引をご確認したい際に便利でございますね。"
        },
        quickMarket: {
            intro: "Quick相場は、市場の情報を知るための機能でございます。",
            details: "価格の目安をご確認いただけますし、管理者は編集も可能でございます。",
            extra: "取引の参考になりますので、よくご覧いただくことをおすすめいたします。"
        },
        browser: {
            intro: "ブラウザは、情報をご覧いただくのに役立つ機能でございます。",
            details: "広告からページをご覧いただけ、管理者であれば編集も可能でございます。",
            extra: "広告は管理者が設定しておりますので、さまざまなものをご覧いただくと良いかもしれません。"
        },
        settings: {
            intro: "設定は、ゲームを調整できる機能でございます。",
            details: "「トラブルシューティング」で問題を解決したり、「カスタマイズ」でお好みに変更することができます。",
            extra: "OP権限が必要ですので、管理者以外の方はご利用いただけません。"
        },
        killCount: {
            intro: "キルカウントは、戦闘のポイントを数える機能でございます。",
            details: "「設定」でON/OFFが可能で、モブを倒すとポイントが増えます。",
            extra: "管理者が設定を変更できますので、ご確認いただくと安心でございます。"
        },
        admin: {
            intro: "管理者版HARUPAYは、管理者向けの特別な機能でございます。",
            details: "全員に送金が可能で、管理者ならではの便利さがございます。",
            extra: "OP権限が必要ですので、一般の方はご利用いただけません。"
        },               
        weather: {
            intro: "天気は、マイクラの世界を彩る大切な要素ですね。",
            details: "「/weather」で雨や晴れに変えられますし、気分も変わりますよね。",
            extra: "雷雨にすると少しドキドキしますよ。"
        },
        food: {
            intro: "食べ物は、マイクラで生き抜くのに欠かせないものですよね。",
            details: "ステーキやリンゴなど、色々あってお腹を満たしてくれます。",
            extra: "ケーキは置けるので、パーティーにも使えますよ。"
        },
        hobby: {
            intro: "趣味は、${player.name}さんが楽しむための素敵な時間ですよね。",
            details: "建築や冒険など、マイクラで何が好きか教えてください。",
            extra: "私も一緒に楽しめるかもしれないと思うとワクワクします。"
        },
        time: {
            intro: "時間は、マイクラの世界でも大切なものですよね。",
            details: "「/time」で昼や夜に変えられますし、リアルタイムだと今は${new Date().toLocaleTimeString()}です。",
            extra: "夜はモブが活発になるので、準備をしっかりしてくださいね。"
        },
        haruassistant: {
            intro: "私は、HARUAssistantと申します。",
            details: "本アドオンの機能の使い方説明や、楽しくおしゃべりしたり出来ます！",
            extra: "よければ何かお話しましょう！"
        },
        haruaddons: {
            intro: "HARUAddonsとは、本アドオンの開発者です。",
            details: "他にも様々なMinecraft統合版のアドオンを開発しています。",
            extra: "詳しくは公式ぺージをご覧になってください！"
        },
        haruphone: {
            intro: "HARUPhoneとは、まさに今手元にあるスマホアイテムの事です。",
            details: "他のプレイヤーと取引したり、商品を購入したり！ブラウザでホームページを作成することもできますよ！",
            extra: "よければ色々触ってみてください！"
        }
    }
};

// トピック検出関数
function detectTopic(message) {
    for (let topic in topicData.detectKeywords) {
        if (topicData.detectKeywords[topic].some(keyword => message.includes(keyword))) {
            return topic;
        }
    }
    return null;
}

// トピック応答取得関数
function getTopicResponse(topic, playerName, prefersDetail) {
    const detail = topicData.responses[topic];
    if (!detail) return null;

    let response = `${detail.intro} ${detail.details}`;
    if (prefersDetail) {
        response += ` さらに、${detail.extra}`;
    }
    return response.replace("${player.name}", playerName);
}

export { detectTopic, getTopicResponse, topicData };